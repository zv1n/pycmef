<html>
  <head>
    <script src='../cmef/cmef.js' type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="../cmef/pure.css">
    <link rel="stylesheet" type="text/css" href="../cmef/cmef.css">
    <link rel="stylesheet" type="text/css" href="../experiment.css">
    <title></title>
    <script>
        cmef.ready(function() {
          $("[name='']").on('click', function() {
            $('').removeClass('pure-button-disabled').attr('disabled', false);
          });

          var row = 6,
              col = 5;

          var container = $('.pure-g.datagrid');
          for (var x = 0; x < row; x++) {
            for (var y = 0; y < col; y++) {
              var value = cmef.current[x*col + y].first;
              var value2 = cmef.current[x*col + y].first;

              var middle = $('<div>').addClass('middle').html(value);
              var selection = $('<div>').addClass('selection').html(middle);

                selection.data('first', value);
                selection.data('second', value2);

              var div = $('<div>').addClass('pure-u-1-5').html(selection);
              container.append(div);
            }
          }

          var timer_started = false;
          $('#grid').show();
          $('#study').hide();

          $('.selection').on('click', function(event) {
            $('#grid').hide();
            $('#study').show();
            $('.close-button').show();

            $(event.currentTarget).addClass('previously-selected');

            var first = $(this).data('first');
            $('#study #first').html(first);

            var second = $(this).data('second');
            $('#study #second').html(second);

            if (!timer_started) {
              // cmef.mark('');
              cmef.timer('study-end', function() {
                $('#grid').hide();
                $('#study').hide();
                $('.close-button').hide();

                $('.timer-container').hide();
                $('#next-footer').show();
              });

              timer_started = true;
            }
          });

          $('.close-button').on('click', function(event) {
            $('#grid').show();
            $('#study').hide();
            $('.close-button').hide();
          });
        });
    </script>
  </head>
  <body>
    <div id="study">
      <div class="pure-g text-middle">
        <div class="pure-u-1-5"></div>
        <div class="pure-u-1-5 text-center" id="first">first</div>
        <div class="pure-u-1-5"></div>
        <div class="pure-u-1-5 text-center" id="second">second</div>
        <div class="pure-u-1-5"></div>
      </div>
    </div>
    <div id="grid" style="display: none;" class="text-middle">
      <div class="pure-g datagrid"></div>
      <footer class="cmef-buttons">
      </footer>
    </div>
    <footer class="cmef-buttons timer-container">
      <div class="timer" id="study-end"></div>
      <input type="button" id="close" value="Close" class="pure-button close-button">
    </footer>
    <footer class="cmef-buttons" id="next-footer">
      <input type="button" id="next" value="Continue" class="pure-button" data-default="true">
    </footer>
  </body>

</html>
